<div style="background-color: white;">
    <div class="container historial">
      <div class="table-wrapper-scroll-y my-custom-scrollbar">
        <select class="form-select my-3" (change)="onSelectedChange($event)" name="visibilidad" required>         
          <option [ngValue]="'all'" id="Todos">Todos</option>         
          <option *ngFor="let state of states" [ngValue]="state">{{state}}</option>     
        </select>
      <table class="table table-striped table-bordered">
        <thead class="table-header" class="userRowHover">

            <tr>
                <th>Nombre del paciente</th>
                <th>Correo del digitador</th>
                <th>Solicitud</th>
                <th>Estado</th>
                <th>Prioridad</th>
                <th>Fecha</th>
            </tr>
        </thead>
        <tbody>
              <tr *ngFor="let record of filteredRecordList" class="userRowHover" (click)="open(content); onSelect(record);">
                <td class="rowInfo">{{record?.nombrePaciente}}</td>
                <td class="rowInfo">{{record?.email}}</td>
                <td class="rowInfo">{{record?.queSolicita}}</td>
                <td class="rowInfo">{{record?.estado}}</td>
                <td class="rowInfo" *ngIf="record?.prioridad == 1">Inmediata</td>
                <td class="rowInfo" *ngIf="record?.prioridad == 2">Alta</td>
                <td class="rowInfo" *ngIf="record?.prioridad == 3">Baja</td>
                <td class="rowInfo">{{record?.fecha}}</td>
              </tr>
        </tbody>
      </table>
    </div>
</div>

  <!-- MODAL -->
  
  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">
        Detalle Solicitud
      </h4>
      <div class="fecha">
        <p id="fecha"></p>
      </div>
      <button type="button" class="btn btn-danger" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form>
        <div class="form-group">
          <label for="nombre">Nombre Digitador</label>
          <div class="input-group">
            <input disabled id="nombreDigitador" type="text" class="form-control" placeholder="Nombre Digitador" name="dp">
            <div class="input-group-append">
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="email">Correo Digitador</label>
          <div class="input-group">
            <input disabled id="email" type="text" class="form-control" placeholder="Correo Digitador" name="dp">
            <div class="input-group-append">
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="nombre">Nombre Paciente</label>
          <div class="input-group">
            <input disabled id="nombrePaciente" type="text" class="form-control" placeholder="Nombre Paciente" name="dp">
            <div class="input-group-append">
            </div>
          </div>
        </div>
        <div class="form-group">
            <label for="ciudad">Ciudad</label>
            <div class="input-group">
              <input disabled id="ciudad" type="text" class="form-control" placeholder="Ciudad Paciente" name="dp">
              <div class="input-group-append">
                <!-- <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button> -->
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="solicitud">Solicitud</label>
            <div class="input-group">
              <input disabled id="solicitud" type="text" class="form-control" placeholder="Solicitud" name="dp">
              <div class="input-group-append">
                <!-- <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button> -->
              </div>
            </div>
          </div>
        <div class="form-group">
            <label for="descripcion">Descripcion</label>
            <div class="input-group">
              <textarea disabled name="descripcion" class="form-control" id="descripcion" cols="60" rows="7" placeholder="Lorem Ipsum" style="resize: none; margin-bottom: 1em;"></textarea>
              <div class="input-group-append">
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="hoja">Hoja de Compromiso</label>
            <br>
            <a class="btn btn-primary" id="hoja" target="_blank">
              Ver Documento
            </a>
          </div>
          <div class="form-group">
            <label for="estudio">Estudio Socioecónomico </label>
            <br>
            <a class="btn btn-primary" id="estudio" target="_blank">
              Ver Documento
            </a>
          </div>
          <div class="form-group">
            <label for="donacion">Solicitud de Donación</label>
            <br>
            <a class="btn btn-primary" id="donacion" target="_blank">
              Ver Documento
            </a>
          </div>
          <div class="form-group">
            <label for="otros">Otros</label>
            <br>
            <a class="btn btn-primary" id="otros" target="_blank">
              Ver Documento
            </a>
          </div>
          <div class="form-group">
            <label for="image_preview">Fotografía Casa#1</label>
            <div><img id="image_preview" class="float-child" width="150" height="150" alt=""></div>
          </div>
          <div class="form-group">
            <label for="image_preview2">Fotografía Casa#2</label>
            <div><img id="image_preview2" class="float-child" width="150" height="150" alt=""></div>
          </div>

      </form>

      <br>
      <h5 style="color: red;">Espacio solo para Presidencia</h5>
      <div class="form-group">
        <label for="comentarioP">Comentarios de Presidencia</label>
        <div class="input-group">
          <textarea name="comentarioP" class="form-control" id="comentarioP" cols="40" rows="3" placeholder="Escribe un comentario sobre la solicitud." style="resize: none; margin-bottom: 1em;"></textarea>
          <div class="input-group-append">
            <!-- <button class="btn btn-outline-secondary calendar" (click)="dp.toggle()" type="button"></button> -->
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="state">Estado</label>
        <div class="input-group">
          <select class="form-select" (change)="onSelectedStateChange($event)" name="state" required>
            <option *ngFor="let st of states" [ngValue]="st">{{st}}</option>
          </select>
        </div>
      </div>

    </div>
    
    <div class="modal-footer">
        <button
          type="submit"
          id="saveBtn"
          class="btn btn-outline-dark"
          (click)="modal.close('Save click'); editarSolicitud(solicitudPacienteSelectedId, solicitudSelectedId, solicitudPreEdicion);"
        >
          Guardar
        </button>
    </div>  
  </ng-template>
  
 
</div>